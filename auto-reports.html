
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Automating Reports &#8212; Coding for Economists</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="canonical" href="https://aeturrell.github.io/coding-for-economists/auto-reports.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The Automated Office" href="auto-office.html" />
    <link rel="prev" title="Automating Research Outputs" href="auto-research-outputs.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/smith_lovelace.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Coding for Economists</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Introduction
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="code-preliminaries.html">
   Preliminaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="code-basics.html">
   Basics of Coding
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Data
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data-analysis-quickstart.html">
   Data Analysis Quickstart
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data-intro.html">
   Working with Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data-exploratory-analysis.html">
   Exploratory Data Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data-read-and-write.html">
   Reading and Writing Files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data-extraction.html">
   Getting Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data-sharing.html">
   Sharing Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="data-advanced.html">
   Advanced Data
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Coding
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="code-where.html">
   Options for Writing Code
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="code-best-practice.html">
   Tips for Better Coding
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="code-advcd-best-practice.html">
   Tools for Better Coding
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="code-advanced.html">
   Advanced Coding
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Data Visualisation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="vis-intro.html">
   Intro to Data Visualisation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="vis-common-plots.html">
   Common Plots
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="vis-narrative.html">
   Narrative Data Visualisation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="vis-animation.html">
   Animation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Econometrics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="econmt-probability-random.html">
   Probability and Random Processes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="econmt-statistics.html">
   Statistics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="econmt-regression.html">
   Regression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="econmt-causal-inference.html">
   Causal Inference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="econmt-bayesian.html">
   Bayesian Inference
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Text Analysis
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="text-intro.html">
   Introduction to Text
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="text-regex.html">
   Regular Expressions, aka regex
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="text-nlp.html">
   Natural Language Processing
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Time
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="time-intro.html">
   Introduction to Time
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="time-series.html">
   Time Series
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="time-fcasts-env.html">
   Forecasting Exercises
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Automation
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="auto-research-outputs.html">
   Automating Research Outputs
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Automating Reports
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="auto-office.html">
   The Automated Office
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Workflow
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="wrkflow-markdown.html">
   Markdown
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="wrkflow-command-line.html">
   The Command Line
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="wrkflow-rap.html">
   Reproducible Analysis
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Geospatial
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="geo-intro.html">
   Intro to Geo-Spatial Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="geo-vis.html">
   Geo-Spatial Visualisation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Mathematics with Code
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="maths-maths-coding.html">
   Intro to Mathematics with Code
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Coming from ...
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="coming-from-stata.html">
   Coming from Stata
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coming-from-matlab.html">
   Coming from Matlab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coming-from-r.html">
   Coming from R
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coming-from-excel.html">
   Coming from Excel
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Elsewhere
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="zreferences.html">
   Bibliography
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="_sources/auto-reports.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/auto-reports.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/aeturrell/coding-for-economists"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/aeturrell/coding-for-economists/issues/new?title=Issue%20on%20page%20%2Fauto-reports.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/aeturrell/coding-for-economists/main?urlpath=tree/auto-reports.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#automated-reports-with-quarto">
   Automated Reports with
   <strong>
    Quarto
   </strong>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-minimal-example-of-a-report-written-with-markdown-content">
     A minimal example of a report written with markdown content
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-minimal-example-of-a-report-written-with-jupyter-notebooks">
     A minimal example of a report written with Jupyter Notebooks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#further-customisation">
     Further Customisation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-optimal-workflow-for-writing-automated-reports">
   The Optimal Workflow for Writing Automated Reports
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#automated-slides-with-quarto">
   Automated Slides with
   <strong>
    Quarto
   </strong>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#review">
   Review
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="automating-reports">
<span id="auto-reports"></span><h1>Automating Reports<a class="headerlink" href="#automating-reports" title="Permalink to this headline">¶</a></h1>
<p>In this chapter, you’ll learn how to set up <em>automated reporting</em> with code, by which we mean creating outputs such as PDF files, Microsoft Word (or open office) text documents, and even slides where the content is partly text and partly generated by code. For example, a technical report exploring recent trade statistics in which the code part pulls down the latest data and plots it. Best of all, you can decide whether to hide or show the code parts in the final outputs (or, with html outputs, allow users to choose whether to see the code or not).</p>
<p>This chapter has some similarities with the previous chapter, on <a class="reference internal" href="auto-research-outputs.html#auto-research-outputs"><span class="std std-ref">Automating Research Outputs</span></a> (and uses some of the same underlying technology). But whereas that chapter was about using the LaTeX typesetting language to create research documents and slides that include automatically generated outputs, this chapter skips out any typesetting with LaTeX shows how to create outputs that go straight from the code to the documents and slides. Although LaTeX gives you full control over how outputs look, it comes with a fairly big overhead and the approach in this chapter trades off control for less complexity.</p>
<p><em>The key use cases for the automated reports in this chapter are sharing documents or slides with colleagues or co-authors within an organisation or collaboration</em>. In more detail, this includes:</p>
<ul class="simple">
<li><p>reports that use data and/or charts and that are similar each time they are run (eg only the data are updated)</p></li>
<li><p>technical reports that show or use the functionality of an existing code base</p></li>
<li><p>slide decks that summarise the most recent data and that are produced at a regular frequency</p></li>
<li><p>sending exploratory or prototype analysis to co-authors or collaborators</p></li>
<li><p>writing blogs for blogging services that accept <code class="docutils literal notranslate"><span class="pre">.md</span></code> files (make sure to export to markdown)</p></li>
<li><p>amazingly, it can also be used to create automatically updated websites relatively easily——we won’t cover that in this chapter, but you can find some <a class="reference external" href="https://quarto.org/docs/websites/">information on this here</a>.</p></li>
</ul>
<p>For this chapter, you will need an installation of <strong>Jupyter Lab</strong> (which can be installed via <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">jupyterlab</span></code>), an installation of a programme called <a class="reference external" href="https://quarto.org/"><strong>Quarto</strong></a>, and the other Python packages as used below. For some types of output, you’ll also need to have an installation of the typesetting language <strong>LaTeX</strong>, for which this book recommends the <a class="reference external" href="https://miktex.org/download">MikTeX</a> distribution.</p>
<p>This chapter has benefitted from work on automated reporting templates by the ever-talented <a class="reference external" href="https://grantmcdermott.com/">Grant McDermott</a>.</p>
<div class="section" id="automated-reports-with-quarto">
<h2>Automated Reports with <strong>Quarto</strong><a class="headerlink" href="#automated-reports-with-quarto" title="Permalink to this headline">¶</a></h2>
<p>The tool that we’ll be using to do this is <a class="reference external" href="https://quarto.org/"><strong>Quarto</strong></a>. You’ll need to go to the website and follow the <a class="reference external" href="https://quarto.org/docs/getting-started/installation.html">install instructions</a> first. You can check you’ve installed it properly using <code class="docutils literal notranslate"><span class="pre">quarto</span> <span class="pre">check</span> <span class="pre">install</span></code> on the command line.</p>
<p><strong>Quarto</strong> is a really convenient wrapper for a bunch of other tools that makes it convenient to produce automated reports. You should check the latest <a class="reference external" href="https://quarto.org/docs/getting-started/quarto-basics.html">documentation</a> for an up to date guide on use——here, we’re going to see the basics and introduce a couple of templates that will serve you well.</p>
<p>Quarto can be used to create <em>output</em> documents and slides in a wide variety of formats including HTML, PDF, Microsoft Office (docx and pptx), OpenOffice, and many more.</p>
<p>You can write the <em>input</em> documents (and code) in two possible ways:</p>
<ol class="simple">
<li><p>A special kind of markdown file, with extension <code class="docutils literal notranslate"><span class="pre">.qmd</span></code>. For more on markdown, see <a class="reference internal" href="wrkflow-markdown.html#wrkflow-markdown"><span class="std std-ref">Markdown</span></a>.</p></li>
<li><p>Jupyter Notebooks, with extension <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> (which most of this book is written in)</p></li>
</ol>
<p>You optionally add code (e.g. Python, R, JavaScript, etc.) to the documents to dynamically create figures, tables, etc. and then render the documents to their final format using Quarto.</p>
<p>If you only want to work one way, this book recommends the latter, using Jupyter Notebooks. But some of the key principles for both will be covered in the next sub-section.</p>
<div class="section" id="a-minimal-example-of-a-report-written-with-markdown-content">
<h3>A minimal example of a report written with markdown content<a class="headerlink" href="#a-minimal-example-of-a-report-written-with-markdown-content" title="Permalink to this headline">¶</a></h3>
<p>We’re now going to try the most minimal example of the first approach, a <code class="docutils literal notranslate"><span class="pre">.qmd</span></code> file, that also includes code and outputs.</p>
<p>There are advantages and disadvantages to writing your report in the <code class="docutils literal notranslate"><span class="pre">.qmd</span></code> format. The advantage is that it’s just a plain text file and therefore anyone can open it, look at it, and change it with a text editor (and it’s more convenient for version control in this way too). The big, big disadvantage is that you cannot see how the code is coming on as you write it (you have to render it to see the code outputs, as we’ll see in a moment). In the next sub-section, we’ll see a way of achieving a better workflow.</p>
<p>Let’s get our minimal example setup. The below code and markdown form the content of a file called <code class="docutils literal notranslate"><span class="pre">report.qmd</span></code>:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>---
title: &quot;Example Report&quot;
author: &quot;Joan Robinson&quot;
format: pdf
toc: true
number-sections: true
<span class="gu">jupyter: python3</span>
<span class="gu">---</span>

<span class="gu">## Polar Axis</span>

For a demonstration of a line plot on a polar axis, see <span class="ni">@fig</span>-polar.

```{python}
<span class="gh">#| label: fig-polar</span>
<span class="gh">#| fig-cap: &quot;A line plot on a polar axis&quot;</span>

import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={&#39;projection&#39;: &#39;polar&#39;})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
<span class="sb">```</span>

<span class="sb">For an example of a code output where the input is not shown, the code below will *only* show the output table by using the `echo: false` option.</span>

<span class="sb">```{python}</span>
<span class="sb">#| echo: false</span>
<span class="sb">import pandas as pd</span>
<span class="sb">import seaborn as sns</span>

<span class="sb">df = sns.load_dataset(&quot;penguins&quot;)</span>
<span class="sb">pd.crosstab(df[&quot;species&quot;], [df[&quot;island&quot;], df[&quot;sex&quot;]], margins=True)</span>
<span class="sb">```</span>
</pre></div>
</div>
<p>To turn this report into a PDF, save it as <code class="docutils literal notranslate"><span class="pre">report.qmd</span></code> and then, on the command line and in the same directory as the file, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>quarto render report.qmd
</pre></div>
</div>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Successfuly create a PDF by saving the markdown above into a file called <code class="docutils literal notranslate"><span class="pre">report.qmd</span></code> and then running the quarto render command.</p>
<p>If you get an error about not being able to find the Jupyter kernel, first check you have Jupyter Lab installed and then check what your Jupyter kernel is called using <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">kernelspec</span> <span class="pre">list</span></code> on the command line. You need to specify the name of your Jupyter kernel correct in the header document (in the example above, it’s called ‘python3’, which is the default).</p>
</div>
<p>Now, because we specified <code class="docutils literal notranslate"><span class="pre">pdf</span></code> in the ‘header’ of our file we automatically got a pdf. But a wide range of output formats are available. For example, HTML</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>quarto render report.qmd --to html
</pre></div>
</div>
<p>and Microsoft Word</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>quarto render report.qmd --to docx
</pre></div>
</div>
<p>One slight frustration with the conversion to Word Documents is that tables from code (dataframes) are not rendered as tables in the Word doc.</p>
<p>The basic syntax is to write <code class="docutils literal notranslate"><span class="pre">--to</span> <span class="pre">outputformat</span></code> at the end of the render command.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Successfuly create a HTML report by saving the markdown above into a file called <code class="docutils literal notranslate"><span class="pre">report.qmd</span></code> and then running the quarto render command with the to html option.</p>
<p>What happens to the menu on the right-hand side as you add extra headings using the <code class="docutils literal notranslate"><span class="pre">##</span></code> markdown syntax?</p>
</div>
<p>Although it’s a bit clunky, it’s also possible to insert code results in-line with text. Here’s a minimal example of that.</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>---
title: &quot;Example Report with Inline Numbers from Code&quot;
author: &quot;Joan Robinson&quot;
format: pdf
toc: true
number-sections: true
<span class="gu">jupyter: python3</span>
<span class="gu">---</span>

<span class="gu">## Report</span>

For a demonstration of a line plot on a polar axis, see <span class="ni">@fig</span>-polar.

For an example of a code output where the input is not shown, the code below will <span class="ge">*only*</span> show the output table by using the <span class="sb">`echo: false`</span> option.

```{python}
<span class="gh">#| echo: false</span>
from IPython.display import display, Markdown
import pandas as pd
import seaborn as sns

df = sns.load_dataset(&quot;penguins&quot;)
big_pen = df[&quot;body_mass_g&quot;].max()
number = len(df)
display(
    Markdown(
    &quot;&quot;&quot;
<span class="gu">### The Heaviest Penguin</span>

We find that the heaviest penguin, out of a total of {number} penguins, has a mass of {big_pen:.2f} kilograms.
&quot;&quot;&quot;.format(big_pen = big_pen, number=number)
)
)
```
</pre></div>
</div>
<p>Note that, in this example, the <code class="docutils literal notranslate"><span class="pre">:2f</span></code> part of <code class="docutils literal notranslate"><span class="pre">{big_pen:.2f}</span></code> is an instruction to report the given number to 2 decimal places.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Create a HTML report with an in-line number using the above example but change the formatting of the heaviest penguin to not show any decimal places.</p>
</div>
<p>There are, of course, loads of extra features that go beyond this example.</p>
</div>
<div class="section" id="a-minimal-example-of-a-report-written-with-jupyter-notebooks">
<h3>A minimal example of a report written with Jupyter Notebooks<a class="headerlink" href="#a-minimal-example-of-a-report-written-with-jupyter-notebooks" title="Permalink to this headline">¶</a></h3>
<p>You can also write your reports with Jupyter Notebooks. As a reminder, these have cells that can be either text (in the form of markdown) or code (and they support a lot of languages), and have the file format <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code>. This book recommends working with them in Visual Studio Code. Google Colab notebooks are a type of Jupyter notebook (and can be downloaded as <code class="docutils literal notranslate"><span class="pre">.ipynb</span></code> files).</p>
<p>Writing your automated reports in Jupyter Notebooks has one major advantage over using <code class="docutils literal notranslate"><span class="pre">.qmd</span></code> markdown files: you can run the code as you go, so you know what you’re getting and it’s easier to weed out bugs. This book recommends this approach to writing automated reports.</p>
<p>So what is the difference from what we’ve seen above? Very little, actually. Your content will still start with exactly the same header but this time it’s going to be in a <em>markdown cell</em> at the top of your notebook. To be explicit, the first cell in your notebook will have:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>---
title: &quot;Example Report&quot;
author: &quot;Joan Robinson&quot;
format: pdf
toc: true
number-sections: true
<span class="gu">jupyter: python3</span>
<span class="gu">---</span>
</pre></div>
</div>
<p>Subsequent cells will be code or markdown depending on whether you need rich outputs (figures and tables) or text. So, instead of a code chunk that begins with <code class="docutils literal notranslate"><span class="pre">```{python}</span></code> like in the <code class="docutils literal notranslate"><span class="pre">.qmd</span></code> approach, you will just create a new code cell.</p>
<p>Remember that putting <code class="docutils literal notranslate"><span class="pre">format:</span> <span class="pre">pdf</span></code> into this header will mean that the <code class="docutils literal notranslate"><span class="pre">render</span></code> command automatically produces a pdf. You can change it to <code class="docutils literal notranslate"><span class="pre">format:</span> <span class="pre">html</span></code> to default to a html file instead—and both options can be over-written by passing <code class="docutils literal notranslate"><span class="pre">--to</span> <span class="pre">format</span></code>.</p>
<p>As before, you can create text that is dynamically updated with code outputs too; just choose a code cell rather than a markdown cell.</p>
<p>The main difference when it comes to Jupyter Notebooks is that you must decide whether you want to <em>execute</em> the notebook before you render it with <strong>Quarto</strong>. Executing a notebook just means run the code before exporting it to a new format. (As an aside, the best practice way to use Jupyter Notebooks is to save them without any code outputs, so execute and render would be the standard way of doing it.) The terminal command to run a notebook and render it is:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>quarto render jupyter-report.ipynb --execute
</pre></div>
</div>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Create a new Jupyter Notebook called <code class="docutils literal notranslate"><span class="pre">jupyter-report.ipynb</span></code> with the header above. Re-use the blocks of code and text from the <code class="docutils literal notranslate"><span class="pre">qmd</span></code> example in the previous section. Render it with the command above.</p>
</div>
<p>To change the output type, add another instruction to the command using <code class="docutils literal notranslate"><span class="pre">--to</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>quarto render jupyter-report.ipynb --execute --to html
</pre></div>
</div>
</div>
<div class="section" id="further-customisation">
<h3>Further Customisation<a class="headerlink" href="#further-customisation" title="Permalink to this headline">¶</a></h3>
<p>The minimal examples we saw above may not cover everything you want to do. You can look at the Quarto <a class="reference external" href="https://quarto.org/docs/output-formats/html-basics.html">documentation</a> for more features and customisation options.</p>
</div>
</div>
<div class="section" id="the-optimal-workflow-for-writing-automated-reports">
<h2>The Optimal Workflow for Writing Automated Reports<a class="headerlink" href="#the-optimal-workflow-for-writing-automated-reports" title="Permalink to this headline">¶</a></h2>
<p>We now turn to a big tip on the optimal workflow for making automated reports and slides. Often you are interested in seeing how the final report will look as you change the code in <em>real time</em>. This is possible with Jupyter Notebooks and <strong>Quarto</strong>. Run the following in the terminal</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>quarto preview jupyter-report.ipynb
</pre></div>
</div>
<p>A browser window will open with a live preview of your pdf (if you set pdf as the default output option in the header). To create a live preview of a HTML document, it’s</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>quarto preview jupyter-report.ipynb --to html
</pre></div>
</div>
<p>The image below shows an example of using preview side-by-side with a Jupyter Notebook in Visual Studio Code.</p>
<p><img alt="Jupyter notebook and live HTML preview of generated report" src="https://quarto.org/docs/tools/images/vscode-preview.png" /></p>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Take the Jupyter example from the previous exercise and change the format to HTML. Then add both a new text cell and a new figure (from a code cell) while in preview mode, making use of the <code class="docutils literal notranslate"><span class="pre">quarto</span> <span class="pre">preview</span></code> command above. If you need inspiration for the new figure, here’s a simple scatter plot:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
    <span class="n">s</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
    <span class="n">c</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="s2">&quot;cyan&quot;</span><span class="p">,</span> <span class="s2">&quot;yellow&quot;</span><span class="p">],</span>
    <span class="n">edgecolors</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="automated-slides-with-quarto">
<h2>Automated Slides with <strong>Quarto</strong><a class="headerlink" href="#automated-slides-with-quarto" title="Permalink to this headline">¶</a></h2>
<p>It isn’t just reports that you can create; you can make slide decks too. You have three main output formats to choose from for slides:</p>
<ul class="simple">
<li><p>html, via something called ‘revealjs’; use <code class="docutils literal notranslate"><span class="pre">format:</span> <span class="pre">revealjs</span></code></p></li>
<li><p>pdf, via the LaTeX beamer package; use <code class="docutils literal notranslate"><span class="pre">format:</span> <span class="pre">beamer</span></code></p></li>
<li><p>Powerpoint, using the pptx format; use <code class="docutils literal notranslate"><span class="pre">format:</span> <span class="pre">pptx</span></code></p></li>
</ul>
<p>Everything else is the same as we have seen before. Here’s a minimal example showing both code and text. It creates a HTML slide deck.</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>---
title: &quot;My Talk&quot;
author: &quot;Joan Robinson&quot;
<span class="gu">format: revealjs</span>
<span class="gu">---</span>

<span class="gu">## Introduction</span>

<span class="k">-</span> This is some text
<span class="k">-</span> As is this

<span class="gu">## Here Are Some Code Outputs</span>

```{python}
<span class="gh">#| echo: false</span>
import numpy as np
import matplotlib.pyplot as plt

r = np.arange(0, 2, 0.01)
theta = 2 * np.pi * r
fig, ax = plt.subplots(subplot_kw={&#39;projection&#39;: &#39;polar&#39;})
ax.plot(theta, r)
ax.set_rticks([0.5, 1, 1.5, 2])
ax.grid(True)
plt.show()
```
</pre></div>
</div>
<p>Note that this will not show the code, only the figure, as we have set <code class="docutils literal notranslate"><span class="pre">#|</span> <span class="pre">echo:</span> <span class="pre">false</span></code> for the code chunk. You could also set <code class="docutils literal notranslate"><span class="pre">echo:</span> <span class="pre">false</span></code> for the whole deck in the header.</p>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Render this slide example in all three of the main formats</p>
</div>
<div class="admonition-exercise admonition">
<p class="admonition-title">Exercise</p>
<p>Add outputs from in-line code into your rendered deck, adapting the heaviest penguin example from earlier.</p>
</div>
</div>
<div class="section" id="review">
<h2>Review<a class="headerlink" href="#review" title="Permalink to this headline">¶</a></h2>
<p>Having pored over this chapter, you should now:</p>
<ul class="simple">
<li><p>✅ know that you can create automatic reports incorporating code and code outputs;</p></li>
<li><p>✅ know how to write automatic reports using <strong>Quarto</strong>, Jupyter Notebooks, and <code class="docutils literal notranslate"><span class="pre">.qmd</span></code> files;</p></li>
<li><p>✅ know how to produce reports in formats such as PDF, Word doc, and HTML;</p></li>
<li><p>✅ know how to produce automatic slide decks in formats such as PDF, Microsoft Powerpoint, and HTML; and</p></li>
<li><p>✅ know how to develop automatic reports using Jupyter Notebooks in preview mode.</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="auto-research-outputs.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Automating Research Outputs</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="auto-office.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">The Automated Office</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Arthur Turrell<br/>
        
            &copy; Copyright 2021.<br/>
          <div class="extra_footer">
            This book is available under an MIT license.
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-189705534-1', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </body>
</html>